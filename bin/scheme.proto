syntax = "proto3";

import "option.proto";

option go_package = "/protoxls";

// 英雄类型枚举
enum HeroType {
    UNKNOWN = 0;
    WARRIOR = 1 [(alias) = "战士"];
    MAGE = 2 [(alias) = "法师"];
    ARCHER = 3 [(alias) = "弓箭手"];
    ASSASSIN = 4 [(alias) = "刺客"];
    SUPPORT = 5 [(alias) = "辅助"];
}

// 技能品质枚举
enum SkillQuality {
    COMMON = 0 [(alias) = "普通"];
    RARE = 1 [(alias) = "稀有"];
    EPIC = 2 [(alias) = "史诗"];
    LEGENDARY = 3 [(alias) = "传说"];
}

// 属性配置子消息
message Attribute {
    int32 strength = 1 [(text) = "力量"];
    int32 agility = 2 [(text) = "敏捷"];
    int32 intelligence = 3 [(text) = "智力"];
    int32 vitality = 4 [(text) = "体力"];
}

// 技能配置子消息
message Skill {
    int32 skill_id = 1 [(text) = "技能ID"];
    string skill_name = 2 [(text) = "技能名称"];
    SkillQuality quality = 3 [(text) = "品质"];
    int32 level = 4 [(text) = "等级"];
    int32 damage = 5 [(text) = "伤害"];
    float cooldown = 6 [(text) = "冷却时间"];
    string description = 7 [(text) = "描述"];
}

// 装备配置子消息
message Equipment {
    int32 equipment_id = 1 [(text) = "装备ID"];
    string equipment_name = 2 [(text) = "装备名称"];
    int32 attack_bonus = 3 [(text) = "攻击力加成"];
    int32 defense_bonus = 4 [(text) = "防御力加成"];
    bool is_special = 5 [(text) = "是否特殊装备"];
}

// 奖励配置子消息
message Reward {
    int32 item_id = 1 [(text) = "物品ID"];
    int32 quantity = 2 [(text) = "数量"];
    float drop_rate = 3 [(text) = "掉落率"];
}

// 英雄配置主消息 - 演示项目完整功能
message HeroConfig {
    // Excel文件配置选项
    option (excel) = "英雄配置表.xlsx";
    option (sheet) = "Sheet1";
    option (table) = "hero_config";
    option (keys) = "id";

    // 基础字段
    int32 id = 1 [(text) = "英雄ID"];
    string name = 2 [(text) = "英雄名称"];
    string description = 3 [(text) = "英雄描述"];
    HeroType type = 4 [(text) = "英雄类型"];
    int32 level = 5 [(text) = "等级"];
    int32 exp = 6 [(text) = "经验值"];
    float growth_rate = 7 [(text) = "成长率"];
    bool is_unlocked = 8 [(text) = "是否解锁"];

    // 单列数组 - 用逗号分隔的值
    repeated int32 unlock_levels = 9 [(text) = "解锁等级"];
    repeated string tags = 10 [(text) = "标签"];
    repeated float stat_multipliers = 11 [(text) = "属性倍率"];

    // 带下标的列表数组 - 使用索引列: resistance_types[1], resistance_types[2] 等
    repeated string resistance_types = 12 [(text) = "抗性类型"];
    repeated int32 resistance_values = 13 [(text) = "抗性数值"];

    // 子message - 嵌套对象，Excel列名为: base_attr.力量, base_attr.敏捷 等
    Attribute base_attr = 14 [(text) = "基础属性"];
    Attribute growth_attr = 15 [(text) = "成长属性"];

    // 子message数组 - 使用索引: skills[1].技能ID, skills[1].技能名称, skills[2].技能ID 等
    repeated Skill skills = 16 [(text) = "技能列表"];
    
    // 更多子message数组示例
    repeated Equipment equipments = 17 [(text) = "装备列表"];
    repeated Reward level_up_rewards = 18 [(text) = "升级奖励"];

    // 混合复杂数据类型
    repeated int32 friendship_hero_ids = 19 [(text) = "友情英雄ID"];  // 单列数组
    repeated Attribute evolution_attrs = 20 [(text) = "进化属性"];   // 子message数组
}